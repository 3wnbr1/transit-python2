#!/usr/bin/env python

import sys, os
sys.path.append(os.path.abspath(os.path.dirname(__file__) + os.path.sep + os.path.pardir))

import transit.reader as treader
import transit.writer as twriter


transport = (len(sys.argv) > 1) and sys.argv[1].replace("-", "_") or "json"

r = treader.Reader(protocol=transport)
w = twriter.Writer(sys.stdout, protocol=transport)

o = r.read(sys.stdin)
w.write(o)

